{% extends 'base.html.twig' %}

{% block title %}Liste des utilisateurs
{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col">
				<h1>Liste des utilisateurs</h1>
			</div>
			<div class="col text-end">
				{% if is_granted('ROLE_ADMIN') %}
					<a href="{{ path('user_new') }}" class="btn btn-primary">Ajouter un utilisateur</a>
				{% endif %}

			</div>
		</div>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>ID</th>
					<th>Prénom</th>
					<th>Nom</th>
					<th>Email</th>
					<th>Téléphone</th>
					{% if is_granted('ROLE_ADMIN') %}
						<th>Actions</th>
					{% endif %}
				</tr>
			</thead>
			<tbody>
				{% for user in users %}
					<tr>
						<td>{{ user.id }}</td>
						<td>{{ user.firstName }}</td>
						<td>{{ user.lastName }}</td>
						<td>{{ user.email }}</td>
						<td>{{ user.phone }}</td>
						{% if is_granted('ROLE_ADMIN') %}
							<td>

								<a href="{{ path('user_show', {'id': user.id}) }}" class="btn btn-sm btn-info">Voir</a>
								<a href="{{ path('user_edit', {'id': user.id}) }}" class="btn btn-sm btn-warning">Modifier</a>
								<form action="{{ path('user_delete', {'id': user.id}) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this member?');">
									<input type="hidden" name="_method" value="DELETE">
									<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
									<button class="btn btn-danger">Delete</button>
								</form>


							</td>
						{% endif %}
					</tr>
				{% else %}
					<tr>
						<td colspan="7">Aucun utilisateur trouvé</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	{% endblock %}
